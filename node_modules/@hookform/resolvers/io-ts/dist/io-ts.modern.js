import*as e from"fp-ts/Either";import{pipe as t,not as r,flow as o,absurd as a,identity as s}from"fp-ts/function";import{toNestError as n,validateFieldsNatively as p}from"@hookform/resolvers";import{TaggedUnionType as m,UnionType as i,IntersectionType as f,ExactType as l,RefinementType as c}from"io-ts";import*as u from"fp-ts/ReadonlyArray";import*as d from"fp-ts/Option";import*as y from"fp-ts/Semigroup";import*as g from"fp-ts/ReadonlyRecord";function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}const v=r=>r.reduce((r,o,a)=>t(o,e.fold(e=>`${a>0?".":""}${e}`,e=>`[${e}]`),e=>`${r}${e}`),""),O=["path"],b=[m,i,f,l,c],x=n=>{const p=t(m=n.context,u.filterMapWithIndex((e,t)=>{const r=e-1,o=-1===r?void 0:m[r];return void 0===o||b.some(e=>o.type instanceof e)?d.none:d.some(t)}),u.map(({key:e})=>e),u.map(o=>t(o,e=>parseInt(e,10),e.fromPredicate(r(Number.isNaN),()=>o))),u.toArray,v);var m;return{message:t(n.message,e.fromNullable(n.context),e.mapLeft(o(u.last,d.map(e=>`expected ${e.type.name} but got ${JSON.stringify(e.actual)}`),d.getOrElseW(()=>a("Error context is missing name")))),e.getOrElseW(s)),type:t(n.context,u.last,d.map(e=>e.type.name),d.getOrElse(()=>"unknown")),path:p}},N=e=>t(e,u.map(e=>({[e.path]:{type:e.type,message:e.message}})),e=>y.fold({concat:(e,t)=>Object.assign({},t,e)})({},e)),$={concat:(e,t)=>h({},t,{types:h({},e.types,{[e.type]:e.message,[t.type]:t.message})})},E=e=>t(g.fromFoldableMap($,u.Foldable)(e,e=>[e.path,e]),g.map(e=>function(e,t){if(null==e)return{};var r,o,a={},s=Object.keys(e);for(o=0;o<s.length;o++)t.indexOf(r=s[o])>=0||(a[r]=e[r]);return a}(e,O))),j=r=>(o,a,s)=>{return t(o,r.decode,e.mapLeft((m=!s.shouldUseNativeValidation&&"all"===s.criteriaMode,e=>{const r=m?E:N;return t(e,u.map(x),r)})),e.mapLeft(e=>n(e,s)),e.fold(e=>({values:{},errors:e}),e=>(s.shouldUseNativeValidation&&p({},s),{values:e,errors:{}})));var m};export{j as ioTsResolver};
//# sourceMappingURL=io-ts.modern.js.map
